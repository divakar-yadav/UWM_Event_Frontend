{"ast":null,"code":"import{useState,useEffect}from'react';import{useParams}from'react-router-dom';import'./index.css';import CountdownTimer from'./CountdownTimer';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ExpLearningEdit(){const{posterId}=useParams();const[loading,setLoading]=useState(true);const[reflectionScore,setReflectionScore]=useState(0);const[communicationScore,setCommunicationScore]=useState(0);const[presentationScore,setPresentationScore]=useState(0);const[feedback,setFeedback]=useState('');const[error,setError]=useState('');const[submitLoading,setSubmitLoading]=useState(false);const[showSuccess,setShowSuccess]=useState(false);useEffect(()=>{document.title=\"Edit Poster Score\";},[]);const navigate=useNavigate();useEffect(()=>{let ignore=false;const fetchData=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/explearning?poster_id=\").concat(posterId),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});if(!ignore&&response.status===200){const data=await response.json();const poster=data.Exp_learning_posters[0];setReflectionScore(poster.reflection_score||0);setCommunicationScore(poster.communication_score||0);setPresentationScore(poster.presentation_score||0);setFeedback(poster.feedback||'');}}catch(err){console.error('Failed to fetch poster data',err);}finally{if(!ignore)setLoading(false);}};fetchData();return()=>{ignore=true;};},[posterId]);const handleSubmit=async e=>{e.preventDefault();setSubmitLoading(true);setError('');setShowSuccess(false);const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/explearning/update/\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))},body:JSON.stringify({poster_id:Number(posterId),reflection_score:Number(reflectionScore),communication_score:Number(communicationScore),presentation_score:Number(presentationScore),feedback:feedback})});if(response.status===200){setShowSuccess(true);setTimeout(()=>{setShowSuccess(false);},3000);navigate('/judge/exp-learning');}else{const data=await response.json();setError((data===null||data===void 0?void 0:data.error)||'Update failed');}setSubmitLoading(false);};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CountdownTimer,{targetDate:new Date('2023-04-22T09:00:00-05:00')}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-ffbd00 to-[#eca600] min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-4\",children:\"Edit Poster Score\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:'40px'},className:\"mt-2\",children:showSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded bg-green-100 border border-green-300 text-green-800 text-sm transition-opacity duration-300\",children:\"\\u2705 Scores updated successfully!\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormInput,{label:\"Reflection Score (0-50)\",value:reflectionScore,onChange:setReflectionScore}),/*#__PURE__*/_jsx(FormInput,{label:\"Communication Score (0-30)\",value:communicationScore,onChange:setCommunicationScore}),/*#__PURE__*/_jsx(FormInput,{label:\"Presentation Score (0-20)\",value:presentationScore,onChange:setPresentationScore}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\"Feedback\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:5,className:\"w-full border rounded px-3 py-2\",value:feedback,onChange:e=>setFeedback(e.target.value)})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\",disabled:submitLoading,children:submitLoading?\"Submitting...\":\"Submit Scores\"})]})]})})})]});}function FormInput(_ref){let{label,value,onChange}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:label}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"w-full border rounded px-3 py-2\",value:value,onChange:e=>onChange(Number(e.target.value))})]});}export default ExpLearningEdit;","map":{"version":3,"names":["useState","useEffect","useParams","CountdownTimer","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ExpLearningEdit","posterId","loading","setLoading","reflectionScore","setReflectionScore","communicationScore","setCommunicationScore","presentationScore","setPresentationScore","feedback","setFeedback","error","setError","submitLoading","setSubmitLoading","showSuccess","setShowSuccess","document","title","navigate","ignore","fetchData","response","fetch","concat","process","env","REACT_APP_API_URL","method","headers","Authorization","localStorage","getItem","status","data","json","poster","Exp_learning_posters","reflection_score","communication_score","presentation_score","err","console","handleSubmit","e","preventDefault","body","JSON","stringify","poster_id","Number","setTimeout","children","targetDate","Date","className","style","height","onSubmit","FormInput","label","value","onChange","rows","target","type","disabled","_ref"],"sources":["/Users/divakaryadav/Documents/SRPC2025/UWM_Event_Frontend/src/ExpLearningEdit.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport './index.css';\nimport CountdownTimer from './CountdownTimer';\nimport { useNavigate } from 'react-router-dom';\n\nfunction ExpLearningEdit() {\n  const { posterId } = useParams();\n  const [loading, setLoading] = useState(true);\n  const [reflectionScore, setReflectionScore] = useState(0);\n  const [communicationScore, setCommunicationScore] = useState(0);\n  const [presentationScore, setPresentationScore] = useState(0);\n  const [feedback, setFeedback] = useState('');\n  const [error, setError] = useState('');\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  useEffect(() => {\n    document.title = `Edit Poster Score`;\n  }, []);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    let ignore = false;\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_URL}/explearning?poster_id=${posterId}`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        });\n\n        if (!ignore && response.status === 200) {\n          const data = await response.json();\n          const poster = data.Exp_learning_posters[0];\n          setReflectionScore(poster.reflection_score || 0);\n          setCommunicationScore(poster.communication_score || 0);\n          setPresentationScore(poster.presentation_score || 0);\n          setFeedback(poster.feedback || '');\n        }\n      } catch (err) {\n        console.error('Failed to fetch poster data', err);\n      } finally {\n        if (!ignore) setLoading(false);\n      }\n    };\n\n    fetchData();\n    return () => { ignore = true; };\n  }, [posterId]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSubmitLoading(true);\n    setError('');\n    setShowSuccess(false);\n\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/explearning/update/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      body: JSON.stringify({\n        poster_id: Number(posterId),\n        reflection_score: Number(reflectionScore),\n        communication_score: Number(communicationScore),\n        presentation_score: Number(presentationScore),\n        feedback: feedback\n      })\n    });\n\n    if (response.status === 200) {\n      setShowSuccess(true);\n      setTimeout(() => {\n        setShowSuccess(false);\n      }, 3000);\n      navigate('/judge/exp-learning')\n\n    } else {\n      const data = await response.json();\n      setError(data?.error || 'Update failed');\n    }\n\n    setSubmitLoading(false);\n  };\n\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <>\n      <CountdownTimer targetDate={new Date('2023-04-22T09:00:00-05:00')} />\n      <div className=\"bg-gradient-to-r from-ffbd00 to-[#eca600] min-h-screen\">\n        <div className=\"container mx-auto px-4 py-6\">\n          <div className=\"bg-white rounded-lg p-6\">\n            <h1 className=\"text-xl font-bold mb-4\">Edit Poster Score</h1>\n\n            {/* Success Message with Fixed Height */}\n            <div style={{ height: '40px' }} className=\"mt-2\">\n  {showSuccess && (\n    <div className=\"p-2 rounded bg-green-100 border border-green-300 text-green-800 text-sm transition-opacity duration-300\">\n      âœ… Scores updated successfully!\n    </div>\n  )}\n</div>\n\n\n            <form onSubmit={handleSubmit}>\n              <FormInput label=\"Reflection Score (0-50)\" value={reflectionScore} onChange={setReflectionScore} />\n              <FormInput label=\"Communication Score (0-30)\" value={communicationScore} onChange={setCommunicationScore} />\n              <FormInput label=\"Presentation Score (0-20)\" value={presentationScore} onChange={setPresentationScore} />\n\n              <div className=\"mb-4\">\n                <label className=\"block text-gray-700 font-bold mb-2\">Feedback</label>\n                <textarea\n                  rows={5}\n                  className=\"w-full border rounded px-3 py-2\"\n                  value={feedback}\n                  onChange={(e) => setFeedback(e.target.value)}\n                ></textarea>\n              </div>\n\n              {error && <p className=\"text-red-500 mb-4\">{error}</p>}\n\n              <button\n                type=\"submit\"\n                className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\n                disabled={submitLoading}\n              >\n                {submitLoading ? \"Submitting...\" : \"Submit Scores\"}\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nfunction FormInput({ label, value, onChange }) {\n  return (\n    <div className=\"mb-4\">\n      <label className=\"block text-gray-700 font-bold mb-2\">{label}</label>\n      <input\n        type=\"number\"\n        className=\"w-full border rounded px-3 py-2\"\n        value={value}\n        onChange={(e) => onChange(Number(e.target.value))}\n      />\n    </div>\n  );\n}\n\nexport default ExpLearningEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}