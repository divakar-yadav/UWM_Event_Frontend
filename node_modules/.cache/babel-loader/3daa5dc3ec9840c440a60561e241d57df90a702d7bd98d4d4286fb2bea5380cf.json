{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import CountdownTimer from'./CountdownTimer';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ThreeMTEdit(){const{posterId}=useParams();const[loading,setLoading]=useState(true);const[comprehensionContent,setComprehensionContent]=useState(0);const[engagement,setEngagement]=useState(0);const[communication,setCommunication]=useState(0);const[overallImpression,setOverallImpression]=useState(0);const[feedback,setFeedback]=useState('');const[error,setError]=useState('');const[submitLoading,setSubmitLoading]=useState(false);const[showSuccess,setShowSuccess]=useState(false);useEffect(()=>{document.title=\"Edit ThreeMT Score\";},[]);const navigate=useNavigate();useEffect(()=>{let ignore=false;const fetchData=async()=>{try{const res=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/three-mt?poster_ID=\").concat(posterId),{headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});if(!ignore&&res.ok){const data=await res.json();const poster=data.ThreeMT_posters.find(p=>String(p.poster_id)===posterId);if(poster){setComprehensionContent(poster.comprehension_content||0);setEngagement(poster.engagement||0);setCommunication(poster.communication||0);setOverallImpression(poster.overall_impression||0);setFeedback(poster.feedback||'');}}}catch(err){console.error(\"Error fetching ThreeMT poster\",err);}finally{if(!ignore)setLoading(false);}};fetchData();return()=>{ignore=true;};},[posterId]);const handleSubmit=async e=>{e.preventDefault();setSubmitLoading(true);setError('');const res=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/three-mt/update/\"),{method:\"POST\",headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({poster_id:Number(posterId),comprehension_content:comprehensionContent,engagement:engagement,communication:communication,overall_impression:overallImpression,feedback:feedback})});if(res.ok){setShowSuccess(true);setTimeout(()=>setShowSuccess(false),3000);navigate('/judge/three-mt');}else{const data=await res.json();setError((data===null||data===void 0?void 0:data.error)||'Failed to update');}setSubmitLoading(false);};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CountdownTimer,{targetDate:new Date('2023-04-22T09:00:00-05:00')}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-ffbd00 to-[#eca600] min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 shadow-md max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-3\",children:\"Edit ThreeMT Poster Score\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:'40px'},className:\"mt-1\",children:showSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded bg-green-100 border border-green-300 text-green-800 text-sm transition-opacity duration-300\",children:\"\\u2705 Scores updated successfully!\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormInput,{label:\"Comprehension & Content (0-10)\",value:comprehensionContent,onChange:setComprehensionContent}),/*#__PURE__*/_jsx(FormInput,{label:\"Engagement (0-10)\",value:engagement,onChange:setEngagement}),/*#__PURE__*/_jsx(FormInput,{label:\"Communication (0-10)\",value:communication,onChange:setCommunication}),/*#__PURE__*/_jsx(FormInput,{label:\"Overall Impression (0-10)\",value:overallImpression,onChange:setOverallImpression}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\"Feedback\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:5,className:\"w-full border rounded px-3 py-2\",value:feedback,onChange:e=>setFeedback(e.target.value)})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\",disabled:submitLoading,children:submitLoading?\"Submitting...\":\"Submit Scores\"})]})]})})})]});}function FormInput(_ref){let{label,value,onChange}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-1\",children:label}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"w-full border rounded px-3 py-2\",value:value,onChange:e=>onChange(Number(e.target.value))})]});}export default ThreeMTEdit;","map":{"version":3,"names":["React","useState","useEffect","useParams","CountdownTimer","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ThreeMTEdit","posterId","loading","setLoading","comprehensionContent","setComprehensionContent","engagement","setEngagement","communication","setCommunication","overallImpression","setOverallImpression","feedback","setFeedback","error","setError","submitLoading","setSubmitLoading","showSuccess","setShowSuccess","document","title","navigate","ignore","fetchData","res","fetch","concat","process","env","REACT_APP_API_URL","headers","Authorization","localStorage","getItem","ok","data","json","poster","ThreeMT_posters","find","p","String","poster_id","comprehension_content","overall_impression","err","console","handleSubmit","e","preventDefault","method","body","JSON","stringify","Number","setTimeout","children","targetDate","Date","className","style","height","onSubmit","FormInput","label","value","onChange","rows","target","type","disabled","_ref"],"sources":["/Users/divakaryadav/Documents/SRPC2025/UWM_Event_Frontend/src/ThreeMtEdit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport CountdownTimer from './CountdownTimer';\nimport { useNavigate } from 'react-router-dom';\n\nfunction ThreeMTEdit() {\n  const { posterId } = useParams();\n  const [loading, setLoading] = useState(true);\n  const [comprehensionContent, setComprehensionContent] = useState(0);\n  const [engagement, setEngagement] = useState(0);\n  const [communication, setCommunication] = useState(0);\n  const [overallImpression, setOverallImpression] = useState(0);\n  const [feedback, setFeedback] = useState('');\n  const [error, setError] = useState('');\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  useEffect(() => {\n    document.title = \"Edit ThreeMT Score\";\n  }, []);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    let ignore = false;\n    const fetchData = async () => {\n      try {\n        const res = await fetch(`${process.env.REACT_APP_API_URL}/three-mt?poster_ID=${posterId}`, {\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n        });\n\n        if (!ignore && res.ok) {\n          const data = await res.json();\n          const poster = data.ThreeMT_posters.find(p => String(p.poster_id) === posterId);\n          if (poster) {\n            setComprehensionContent(poster.comprehension_content || 0);\n            setEngagement(poster.engagement || 0);\n            setCommunication(poster.communication || 0);\n            setOverallImpression(poster.overall_impression || 0);\n            setFeedback(poster.feedback || '');\n          }\n        }\n      } catch (err) {\n        console.error(\"Error fetching ThreeMT poster\", err);\n      } finally {\n        if (!ignore) setLoading(false);\n      }\n    };\n\n    fetchData();\n    return () => { ignore = true };\n  }, [posterId]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSubmitLoading(true);\n    setError('');\n\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/three-mt/update/`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n      body: JSON.stringify({\n        poster_id: Number(posterId),\n        comprehension_content: comprehensionContent,\n        engagement: engagement,\n        communication: communication,\n        overall_impression: overallImpression,\n        feedback: feedback\n      })\n    });\n\n    if (res.ok) {\n      setShowSuccess(true);\n      setTimeout(() => setShowSuccess(false), 3000);\n      navigate('/judge/three-mt');\n    } else {\n      const data = await res.json();\n      setError(data?.error || 'Failed to update');\n    }\n\n    setSubmitLoading(false);\n  };\n\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <>\n      <CountdownTimer targetDate={new Date('2023-04-22T09:00:00-05:00')} />\n      <div className=\"bg-gradient-to-r from-ffbd00 to-[#eca600] min-h-screen\">\n        <div className=\"container mx-auto px-4 py-6\">\n          <div className=\"bg-white rounded-lg p-6 shadow-md max-w-2xl mx-auto\">\n            <h1 className=\"text-xl font-bold mb-3\">Edit ThreeMT Poster Score</h1>\n            <div style={{ height: '40px' }} className=\"mt-1\">\n              {showSuccess && (\n                <div className=\"p-2 rounded bg-green-100 border border-green-300 text-green-800 text-sm transition-opacity duration-300\">\n                  âœ… Scores updated successfully!\n                </div>\n              )}\n            </div>\n\n            <form onSubmit={handleSubmit}>\n              <FormInput label=\"Comprehension & Content (0-10)\" value={comprehensionContent} onChange={setComprehensionContent} />\n              <FormInput label=\"Engagement (0-10)\" value={engagement} onChange={setEngagement} />\n              <FormInput label=\"Communication (0-10)\" value={communication} onChange={setCommunication} />\n              <FormInput label=\"Overall Impression (0-10)\" value={overallImpression} onChange={setOverallImpression} />\n\n              <div className=\"mb-4\">\n                <label className=\"block text-gray-700 font-bold mb-2\">Feedback</label>\n                <textarea\n                  rows={5}\n                  className=\"w-full border rounded px-3 py-2\"\n                  value={feedback}\n                  onChange={(e) => setFeedback(e.target.value)}\n                ></textarea>\n              </div>\n\n              {error && <p className=\"text-red-500 mb-4\">{error}</p>}\n              <button\n                type=\"submit\"\n                className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\n                disabled={submitLoading}\n              >\n                {submitLoading ? \"Submitting...\" : \"Submit Scores\"}\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nfunction FormInput({ label, value, onChange }) {\n  return (\n    <div className=\"mb-3\">\n      <label className=\"block text-gray-700 font-bold mb-1\">{label}</label>\n      <input\n        type=\"number\"\n        className=\"w-full border rounded px-3 py-2\"\n        value={value}\n        onChange={(e) => onChange(Number(e.target.value))}\n      />\n    </div>\n  );\n}\n\nexport default ThreeMTEdit;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE/C,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAAEC,QAAS,CAAC,CAAGV,SAAS,CAAC,CAAC,CAChC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CACnE,KAAM,CAACiB,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAACmB,aAAa,CAAEC,gBAAgB,CAAC,CAAGpB,QAAQ,CAAC,CAAC,CAAC,CACrD,KAAM,CAACqB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGtB,QAAQ,CAAC,CAAC,CAAC,CAC7D,KAAM,CAACuB,QAAQ,CAAEC,WAAW,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACyB,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC2B,aAAa,CAAEC,gBAAgB,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAAC6B,WAAW,CAAEC,cAAc,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAErDC,SAAS,CAAC,IAAM,CACd8B,QAAQ,CAACC,KAAK,CAAG,oBAAoB,CACvC,CAAC,CAAE,EAAE,CAAC,CACN,KAAM,CAAAC,QAAQ,CAAG7B,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACd,GAAI,CAAAiC,MAAM,CAAG,KAAK,CAClB,KAAM,CAAAC,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,yBAAAH,MAAA,CAAuB1B,QAAQ,EAAI,CACzF8B,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAL,MAAA,CAAYM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CAAC,CAAC,CAEF,GAAI,CAACX,MAAM,EAAIE,GAAG,CAACU,EAAE,CAAE,CACrB,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAX,GAAG,CAACY,IAAI,CAAC,CAAC,CAC7B,KAAM,CAAAC,MAAM,CAAGF,IAAI,CAACG,eAAe,CAACC,IAAI,CAACC,CAAC,EAAIC,MAAM,CAACD,CAAC,CAACE,SAAS,CAAC,GAAK1C,QAAQ,CAAC,CAC/E,GAAIqC,MAAM,CAAE,CACVjC,uBAAuB,CAACiC,MAAM,CAACM,qBAAqB,EAAI,CAAC,CAAC,CAC1DrC,aAAa,CAAC+B,MAAM,CAAChC,UAAU,EAAI,CAAC,CAAC,CACrCG,gBAAgB,CAAC6B,MAAM,CAAC9B,aAAa,EAAI,CAAC,CAAC,CAC3CG,oBAAoB,CAAC2B,MAAM,CAACO,kBAAkB,EAAI,CAAC,CAAC,CACpDhC,WAAW,CAACyB,MAAM,CAAC1B,QAAQ,EAAI,EAAE,CAAC,CACpC,CACF,CACF,CAAE,MAAOkC,GAAG,CAAE,CACZC,OAAO,CAACjC,KAAK,CAAC,+BAA+B,CAAEgC,GAAG,CAAC,CACrD,CAAC,OAAS,CACR,GAAI,CAACvB,MAAM,CAAEpB,UAAU,CAAC,KAAK,CAAC,CAChC,CACF,CAAC,CAEDqB,SAAS,CAAC,CAAC,CACX,MAAO,IAAM,CAAED,MAAM,CAAG,IAAI,CAAC,CAAC,CAChC,CAAC,CAAE,CAACtB,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAA+C,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBjC,gBAAgB,CAAC,IAAI,CAAC,CACtBF,QAAQ,CAAC,EAAE,CAAC,CAEZ,KAAM,CAAAU,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,sBAAqB,CAC3EqB,MAAM,CAAE,MAAM,CACdpB,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAL,MAAA,CAAYM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CAAC,CACDkB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBX,SAAS,CAAEY,MAAM,CAACtD,QAAQ,CAAC,CAC3B2C,qBAAqB,CAAExC,oBAAoB,CAC3CE,UAAU,CAAEA,UAAU,CACtBE,aAAa,CAAEA,aAAa,CAC5BqC,kBAAkB,CAAEnC,iBAAiB,CACrCE,QAAQ,CAAEA,QACZ,CAAC,CACH,CAAC,CAAC,CAEF,GAAIa,GAAG,CAACU,EAAE,CAAE,CACVhB,cAAc,CAAC,IAAI,CAAC,CACpBqC,UAAU,CAAC,IAAMrC,cAAc,CAAC,KAAK,CAAC,CAAE,IAAI,CAAC,CAC7CG,QAAQ,CAAC,iBAAiB,CAAC,CAC7B,CAAC,IAAM,CACL,KAAM,CAAAc,IAAI,CAAG,KAAM,CAAAX,GAAG,CAACY,IAAI,CAAC,CAAC,CAC7BtB,QAAQ,CAAC,CAAAqB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEtB,KAAK,GAAI,kBAAkB,CAAC,CAC7C,CAEAG,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,CAED,GAAIf,OAAO,CAAE,mBAAOP,IAAA,QAAA8D,QAAA,CAAK,YAAU,CAAK,CAAC,CAEzC,mBACE5D,KAAA,CAAAE,SAAA,EAAA0D,QAAA,eACE9D,IAAA,CAACH,cAAc,EAACkE,UAAU,CAAE,GAAI,CAAAC,IAAI,CAAC,2BAA2B,CAAE,CAAE,CAAC,cACrEhE,IAAA,QAAKiE,SAAS,CAAC,wDAAwD,CAAAH,QAAA,cACrE9D,IAAA,QAAKiE,SAAS,CAAC,6BAA6B,CAAAH,QAAA,cAC1C5D,KAAA,QAAK+D,SAAS,CAAC,qDAAqD,CAAAH,QAAA,eAClE9D,IAAA,OAAIiE,SAAS,CAAC,wBAAwB,CAAAH,QAAA,CAAC,2BAAyB,CAAI,CAAC,cACrE9D,IAAA,QAAKkE,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAO,CAAE,CAACF,SAAS,CAAC,MAAM,CAAAH,QAAA,CAC7CvC,WAAW,eACVvB,IAAA,QAAKiE,SAAS,CAAC,yGAAyG,CAAAH,QAAA,CAAC,qCAEzH,CAAK,CACN,CACE,CAAC,cAEN5D,KAAA,SAAMkE,QAAQ,CAAEf,YAAa,CAAAS,QAAA,eAC3B9D,IAAA,CAACqE,SAAS,EAACC,KAAK,CAAC,gCAAgC,CAACC,KAAK,CAAE9D,oBAAqB,CAAC+D,QAAQ,CAAE9D,uBAAwB,CAAE,CAAC,cACpHV,IAAA,CAACqE,SAAS,EAACC,KAAK,CAAC,mBAAmB,CAACC,KAAK,CAAE5D,UAAW,CAAC6D,QAAQ,CAAE5D,aAAc,CAAE,CAAC,cACnFZ,IAAA,CAACqE,SAAS,EAACC,KAAK,CAAC,sBAAsB,CAACC,KAAK,CAAE1D,aAAc,CAAC2D,QAAQ,CAAE1D,gBAAiB,CAAE,CAAC,cAC5Fd,IAAA,CAACqE,SAAS,EAACC,KAAK,CAAC,2BAA2B,CAACC,KAAK,CAAExD,iBAAkB,CAACyD,QAAQ,CAAExD,oBAAqB,CAAE,CAAC,cAEzGd,KAAA,QAAK+D,SAAS,CAAC,MAAM,CAAAH,QAAA,eACnB9D,IAAA,UAAOiE,SAAS,CAAC,oCAAoC,CAAAH,QAAA,CAAC,UAAQ,CAAO,CAAC,cACtE9D,IAAA,aACEyE,IAAI,CAAE,CAAE,CACRR,SAAS,CAAC,iCAAiC,CAC3CM,KAAK,CAAEtD,QAAS,CAChBuD,QAAQ,CAAGlB,CAAC,EAAKpC,WAAW,CAACoC,CAAC,CAACoB,MAAM,CAACH,KAAK,CAAE,CACpC,CAAC,EACT,CAAC,CAELpD,KAAK,eAAInB,IAAA,MAAGiE,SAAS,CAAC,mBAAmB,CAAAH,QAAA,CAAE3C,KAAK,CAAI,CAAC,cACtDnB,IAAA,WACE2E,IAAI,CAAC,QAAQ,CACbV,SAAS,CAAC,wEAAwE,CAClFW,QAAQ,CAAEvD,aAAc,CAAAyC,QAAA,CAEvBzC,aAAa,CAAG,eAAe,CAAG,eAAe,CAC5C,CAAC,EACL,CAAC,EACJ,CAAC,CACH,CAAC,CACH,CAAC,EACN,CAAC,CAEP,CAEA,QAAS,CAAAgD,SAASA,CAAAQ,IAAA,CAA6B,IAA5B,CAAEP,KAAK,CAAEC,KAAK,CAAEC,QAAS,CAAC,CAAAK,IAAA,CAC3C,mBACE3E,KAAA,QAAK+D,SAAS,CAAC,MAAM,CAAAH,QAAA,eACnB9D,IAAA,UAAOiE,SAAS,CAAC,oCAAoC,CAAAH,QAAA,CAAEQ,KAAK,CAAQ,CAAC,cACrEtE,IAAA,UACE2E,IAAI,CAAC,QAAQ,CACbV,SAAS,CAAC,iCAAiC,CAC3CM,KAAK,CAAEA,KAAM,CACbC,QAAQ,CAAGlB,CAAC,EAAKkB,QAAQ,CAACZ,MAAM,CAACN,CAAC,CAACoB,MAAM,CAACH,KAAK,CAAC,CAAE,CACnD,CAAC,EACC,CAAC,CAEV,CAEA,cAAe,CAAAlE,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}